var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
import { DebugView, SideBarView, ScmView } from '../../index.js';
import { NewScmView } from '../sidebar/scm/NewScmView.js';
import { PageDecorator, ElementWithContextMenu } from '../utils.js';
import { ViewControl as ViewControlLocators } from '../../locators/1.73.0.js';
/**
 * Page object representing a view container item in the activity bar
 *
 * ```ts
 * const workbench = await browser.getWorkbench()
 * const viewControls = await workbench.getActivityBar().getViewControls()
 * console.log(await Promise.all(viewControls.map((vc) => vc.getTitle())))
 * // returns: [
 * //    'Explorer',
 * //    'Search',
 * //    'Source Control',
 * //    'Run and Debug',
 * //    'Extensions'
 * // ]
 * ```
 *
 * @category ActivityBar
 */
let ViewControl = class ViewControl extends ElementWithContextMenu {
    constructor(locators, element, bar) {
        super(locators, element, bar.elem);
        this.bar = bar;
        /**
         * @private
         */
        this.locatorKey = 'ViewControl';
    }
    /**
     * Opens the associated view if not already open
     * @returns Promise resolving to SideBarView object representing the opened view
     */
    async openView() {
        const klass = await this.elem.getAttribute(this.locators.attribute);
        if (klass.indexOf(this.locators.klass) < 0) {
            await this.elem.click();
            // eslint-disable-next-line wdio/no-pause
            await browser.pause(500);
        }
        const view = await new SideBarView(this.locatorMap).wait();
        if ((await view.elem.$$(this.locators.scmId)).length > 0) {
            if (await browser.getVSCodeChannel() === 'vscode' && await browser.getVSCodeVersion() >= '1.47.0') {
                return new NewScmView(this.locatorMap).wait();
            }
            return new ScmView(this.locatorMap).wait();
        }
        if ((await view.elem.$$(this.locators.debugId)).length > 0) {
            return new DebugView(this.locatorMap).wait();
        }
        return view;
    }
    /**
     * Closes the associated view if not already closed
     * @returns Promise resolving when the view closes
     */
    async closeView() {
        const klass = await this.elem.getAttribute(this.locators.attribute);
        if (klass.indexOf(this.locators.klass) > -1) {
            await this.elem.click();
        }
    }
    /**
     * Returns the title of the associated view
     * @param includeKeyboardShortcuts if true it includes the keyboard shortcut
     *                                 in the title (e.g. "Source Control (Ctrl+Shift+G)")
     */
    async getTitle(includeKeyboardShortcuts = false) {
        const title = await this.badge$.getAttribute('aria-label');
        if (!includeKeyboardShortcuts) {
            /**
             * first strip out possible pending annotation, e.g.
             * "Source Control (⌃⇧G) - 8 pending
             */
            const [label] = title.split(' - ');
            /**
             * next, strip out possible keyboard shortcuts, e.g.
             * "Source Control (⌃⇧G)
             */
            return label.endsWith(')')
                ? label.split(' ').slice(0, -1).join(' ')
                : label;
        }
        return title;
    }
};
ViewControl = __decorate([
    PageDecorator(ViewControlLocators)
], ViewControl);
export { ViewControl };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmlld0NvbnRyb2wuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvcGFnZW9iamVjdHMvYWN0aXZpdHlCYXIvVmlld0NvbnRyb2wudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRUEsT0FBTyxFQUNVLFNBQVMsRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUMvQyxNQUFNLGdCQUFnQixDQUFBO0FBQ3ZCLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQTtBQUV6RCxPQUFPLEVBQ0gsYUFBYSxFQUFrQixzQkFBc0IsRUFDeEQsTUFBTSxhQUFhLENBQUE7QUFDcEIsT0FBTyxFQUFFLFdBQVcsSUFBSSxtQkFBbUIsRUFBRSxNQUFNLDBCQUEwQixDQUFBO0FBRzdFOzs7Ozs7Ozs7Ozs7Ozs7OztHQWlCRztBQUVJLElBQU0sV0FBVyxHQUFqQixNQUFNLFdBQVksU0FBUSxzQkFBa0Q7SUFNL0UsWUFDSSxRQUEwQixFQUMxQixPQUFxRCxFQUM5QyxHQUFnQjtRQUV2QixLQUFLLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUE7UUFGM0IsUUFBRyxHQUFILEdBQUcsQ0FBYTtRQVIzQjs7V0FFRztRQUNJLGVBQVUsR0FBRyxhQUFzQixDQUFBO0lBUTFDLENBQUM7SUFFRDs7O09BR0c7SUFDSCxLQUFLLENBQUMsUUFBUTtRQUNWLE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNuRSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUN6QyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7WUFDdkIseUNBQXlDO1lBQ3pDLE1BQU0sT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUM1QixDQUFDO1FBQ0QsTUFBTSxJQUFJLEdBQUcsTUFBTSxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7UUFDMUQsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUN2RCxJQUFJLE1BQU0sT0FBTyxDQUFDLGdCQUFnQixFQUFFLEtBQUssUUFBUSxJQUFJLE1BQU0sT0FBTyxDQUFDLGdCQUFnQixFQUFFLElBQUksUUFBUSxFQUFFLENBQUM7Z0JBQ2hHLE9BQU8sSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO1lBQ2pELENBQUM7WUFDRCxPQUFPLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtRQUM5QyxDQUFDO1FBQ0QsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUN6RCxPQUFPLElBQUksU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtRQUNoRCxDQUFDO1FBQ0QsT0FBTyxJQUFJLENBQUE7SUFDZixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsS0FBSyxDQUFDLFNBQVM7UUFDWCxNQUFNLEtBQUssR0FBRyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUE7UUFDbkUsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUMxQyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7UUFDM0IsQ0FBQztJQUNMLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsS0FBSyxDQUFDLFFBQVEsQ0FBRSx3QkFBd0IsR0FBRyxLQUFLO1FBQzVDLE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUE7UUFDMUQsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUM7WUFDNUI7OztlQUdHO1lBQ0gsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUE7WUFFbEM7OztlQUdHO1lBQ0gsT0FBTyxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQztnQkFDdEIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7Z0JBQ3pDLENBQUMsQ0FBQyxLQUFLLENBQUE7UUFDZixDQUFDO1FBRUQsT0FBTyxLQUFLLENBQUE7SUFDaEIsQ0FBQztDQUNKLENBQUE7QUExRVksV0FBVztJQUR2QixhQUFhLENBQUMsbUJBQW1CLENBQUM7R0FDdEIsV0FBVyxDQTBFdkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENoYWluYWJsZVByb21pc2VFbGVtZW50IH0gZnJvbSAnd2ViZHJpdmVyaW8nXG5cbmltcG9ydCB7XG4gICAgQWN0aXZpdHlCYXIsIERlYnVnVmlldywgU2lkZUJhclZpZXcsIFNjbVZpZXdcbn0gZnJvbSAnLi4vLi4vaW5kZXguanMnXG5pbXBvcnQgeyBOZXdTY21WaWV3IH0gZnJvbSAnLi4vc2lkZWJhci9zY20vTmV3U2NtVmlldy5qcydcblxuaW1wb3J0IHtcbiAgICBQYWdlRGVjb3JhdG9yLCBJUGFnZURlY29yYXRvciwgRWxlbWVudFdpdGhDb250ZXh0TWVudSwgVlNDb2RlTG9jYXRvck1hcFxufSBmcm9tICcuLi91dGlscy5qcydcbmltcG9ydCB7IFZpZXdDb250cm9sIGFzIFZpZXdDb250cm9sTG9jYXRvcnMgfSBmcm9tICcuLi8uLi9sb2NhdG9ycy8xLjczLjAuanMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlld0NvbnRyb2wgZXh0ZW5kcyBJUGFnZURlY29yYXRvcjx0eXBlb2YgVmlld0NvbnRyb2xMb2NhdG9ycz4geyB9XG4vKipcbiAqIFBhZ2Ugb2JqZWN0IHJlcHJlc2VudGluZyBhIHZpZXcgY29udGFpbmVyIGl0ZW0gaW4gdGhlIGFjdGl2aXR5IGJhclxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCB3b3JrYmVuY2ggPSBhd2FpdCBicm93c2VyLmdldFdvcmtiZW5jaCgpXG4gKiBjb25zdCB2aWV3Q29udHJvbHMgPSBhd2FpdCB3b3JrYmVuY2guZ2V0QWN0aXZpdHlCYXIoKS5nZXRWaWV3Q29udHJvbHMoKVxuICogY29uc29sZS5sb2coYXdhaXQgUHJvbWlzZS5hbGwodmlld0NvbnRyb2xzLm1hcCgodmMpID0+IHZjLmdldFRpdGxlKCkpKSlcbiAqIC8vIHJldHVybnM6IFtcbiAqIC8vICAgICdFeHBsb3JlcicsXG4gKiAvLyAgICAnU2VhcmNoJyxcbiAqIC8vICAgICdTb3VyY2UgQ29udHJvbCcsXG4gKiAvLyAgICAnUnVuIGFuZCBEZWJ1ZycsXG4gKiAvLyAgICAnRXh0ZW5zaW9ucydcbiAqIC8vIF1cbiAqIGBgYFxuICpcbiAqIEBjYXRlZ29yeSBBY3Rpdml0eUJhclxuICovXG5AUGFnZURlY29yYXRvcihWaWV3Q29udHJvbExvY2F0b3JzKVxuZXhwb3J0IGNsYXNzIFZpZXdDb250cm9sIGV4dGVuZHMgRWxlbWVudFdpdGhDb250ZXh0TWVudTx0eXBlb2YgVmlld0NvbnRyb2xMb2NhdG9ycz4ge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHVibGljIGxvY2F0b3JLZXkgPSAnVmlld0NvbnRyb2wnIGFzIGNvbnN0XG5cbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIGxvY2F0b3JzOiBWU0NvZGVMb2NhdG9yTWFwLFxuICAgICAgICBlbGVtZW50OiBDaGFpbmFibGVQcm9taXNlRWxlbWVudDxXZWJkcml2ZXJJTy5FbGVtZW50PixcbiAgICAgICAgcHVibGljIGJhcjogQWN0aXZpdHlCYXJcbiAgICApIHtcbiAgICAgICAgc3VwZXIobG9jYXRvcnMsIGVsZW1lbnQsIGJhci5lbGVtKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBhc3NvY2lhdGVkIHZpZXcgaWYgbm90IGFscmVhZHkgb3BlblxuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIFNpZGVCYXJWaWV3IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIG9wZW5lZCB2aWV3XG4gICAgICovXG4gICAgYXN5bmMgb3BlblZpZXcgKCk6IFByb21pc2U8U2lkZUJhclZpZXc8YW55PiB8IE5ld1NjbVZpZXcgfCBTY21WaWV3IHwgRGVidWdWaWV3PiB7XG4gICAgICAgIGNvbnN0IGtsYXNzID0gYXdhaXQgdGhpcy5lbGVtLmdldEF0dHJpYnV0ZSh0aGlzLmxvY2F0b3JzLmF0dHJpYnV0ZSlcbiAgICAgICAgaWYgKGtsYXNzLmluZGV4T2YodGhpcy5sb2NhdG9ycy5rbGFzcykgPCAwKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmVsZW0uY2xpY2soKVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHdkaW8vbm8tcGF1c2VcbiAgICAgICAgICAgIGF3YWl0IGJyb3dzZXIucGF1c2UoNTAwKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZpZXcgPSBhd2FpdCBuZXcgU2lkZUJhclZpZXcodGhpcy5sb2NhdG9yTWFwKS53YWl0KClcbiAgICAgICAgaWYgKChhd2FpdCB2aWV3LmVsZW0uJCQodGhpcy5sb2NhdG9ycy5zY21JZCkpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChhd2FpdCBicm93c2VyLmdldFZTQ29kZUNoYW5uZWwoKSA9PT0gJ3ZzY29kZScgJiYgYXdhaXQgYnJvd3Nlci5nZXRWU0NvZGVWZXJzaW9uKCkgPj0gJzEuNDcuMCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5ld1NjbVZpZXcodGhpcy5sb2NhdG9yTWFwKS53YWl0KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgU2NtVmlldyh0aGlzLmxvY2F0b3JNYXApLndhaXQoKVxuICAgICAgICB9XG4gICAgICAgIGlmICgoYXdhaXQgdmlldy5lbGVtLiQkKHRoaXMubG9jYXRvcnMuZGVidWdJZCkpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGVidWdWaWV3KHRoaXMubG9jYXRvck1hcCkud2FpdCgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZpZXdcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIGFzc29jaWF0ZWQgdmlldyBpZiBub3QgYWxyZWFkeSBjbG9zZWRcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB3aGVuIHRoZSB2aWV3IGNsb3Nlc1xuICAgICAqL1xuICAgIGFzeW5jIGNsb3NlVmlldyAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGtsYXNzID0gYXdhaXQgdGhpcy5lbGVtLmdldEF0dHJpYnV0ZSh0aGlzLmxvY2F0b3JzLmF0dHJpYnV0ZSlcbiAgICAgICAgaWYgKGtsYXNzLmluZGV4T2YodGhpcy5sb2NhdG9ycy5rbGFzcykgPiAtMSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5lbGVtLmNsaWNrKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHRpdGxlIG9mIHRoZSBhc3NvY2lhdGVkIHZpZXdcbiAgICAgKiBAcGFyYW0gaW5jbHVkZUtleWJvYXJkU2hvcnRjdXRzIGlmIHRydWUgaXQgaW5jbHVkZXMgdGhlIGtleWJvYXJkIHNob3J0Y3V0XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0aGUgdGl0bGUgKGUuZy4gXCJTb3VyY2UgQ29udHJvbCAoQ3RybCtTaGlmdCtHKVwiKVxuICAgICAqL1xuICAgIGFzeW5jIGdldFRpdGxlIChpbmNsdWRlS2V5Ym9hcmRTaG9ydGN1dHMgPSBmYWxzZSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gYXdhaXQgdGhpcy5iYWRnZSQuZ2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJylcbiAgICAgICAgaWYgKCFpbmNsdWRlS2V5Ym9hcmRTaG9ydGN1dHMpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogZmlyc3Qgc3RyaXAgb3V0IHBvc3NpYmxlIHBlbmRpbmcgYW5ub3RhdGlvbiwgZS5nLlxuICAgICAgICAgICAgICogXCJTb3VyY2UgQ29udHJvbCAo4oyD4oenRykgLSA4IHBlbmRpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uc3QgW2xhYmVsXSA9IHRpdGxlLnNwbGl0KCcgLSAnKVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIG5leHQsIHN0cmlwIG91dCBwb3NzaWJsZSBrZXlib2FyZCBzaG9ydGN1dHMsIGUuZy5cbiAgICAgICAgICAgICAqIFwiU291cmNlIENvbnRyb2wgKOKMg+KHp0cpXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJldHVybiBsYWJlbC5lbmRzV2l0aCgnKScpXG4gICAgICAgICAgICAgICAgPyBsYWJlbC5zcGxpdCgnICcpLnNsaWNlKDAsIC0xKS5qb2luKCcgJylcbiAgICAgICAgICAgICAgICA6IGxhYmVsXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGl0bGVcbiAgICB9XG59XG4iXX0=