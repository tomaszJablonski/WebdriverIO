{"version":3,"file":"execute.js","sourceRoot":"","sources":["../../src/commands/execute.ts"],"names":[],"mappings":"AAAA,MAAM,CAAC,KAAK,UAAU,OAAO,CAC3B,OAA4B,EAC5B,MAAgE,EAChE,GAAG,IAAoB;IAEvB;;OAEG;IACH,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE,CAAC;QAC/D,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAC;IAC3E,CAAC;IAED,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;IACzD,CAAC;IAED,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE,CAAC;QAC/B,OAAO,CAAC,MAAM,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,SAAS,CAAC;IACtD,CAAC;IAED,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC,OAAO,CACvC,SAAS,qBAAqB,CAAC,MAAc,EAAE,GAAG,IAAI;QACpD,IAAI,MAAM,CAAC,YAAY,KAAK,SAAS,EAAE,CAAC;YACtC,MAAM,UAAU,GACd,yCAAyC;gBACzC,yEAAyE;gBACzE,2FAA2F;gBAC3F,+FAA+F,CAAC;YAClG,MAAM,IAAI,KAAK,CAAC,UAAU,CAAC,CAAC;QAC9B,CAAC;QACD,OAAO,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IACnD,CAAC,EACD,GAAG,MAAM,EAAE,EACX,GAAG,IAAI,CACR,CAAC;IAEF,OAAQ,WAA2B,IAAI,SAAS,CAAC;AACnD,CAAC","sourcesContent":["export async function execute<ReturnValue, InnerArguments extends unknown[]>(\n  browser: WebdriverIO.Browser,\n  script: string | ((...innerArgs: InnerArguments) => ReturnValue),\n  ...args: InnerArguments\n): Promise<ReturnValue | undefined> {\n  /**\n   * parameter check\n   */\n  if (typeof script !== 'string' && typeof script !== 'function') {\n    throw new Error('Expecting script to be type of \"string\" or \"function\"');\n  }\n\n  if (!browser) {\n    throw new Error('WDIO browser is not yet initialised');\n  }\n\n  if (typeof script === 'string') {\n    return (await browser.execute(script)) ?? undefined;\n  }\n\n  const returnValue = await browser.execute(\n    function executeWithinElectron(script: string, ...args) {\n      if (window.wdioElectron === undefined) {\n        const errMessage =\n          'Electron context bridge not available! ' +\n          'Did you import the service hook scripts into your application via e.g. ' +\n          \"`import('wdio-electron-service/main')` and `import('wdio-electron-service/preload')`?\\n\\n\" +\n          'Find more information at https://webdriver.io/docs/desktop-testing/electron#api-configuration';\n        throw new Error(errMessage);\n      }\n      return window.wdioElectron.execute(script, args);\n    },\n    `${script}`,\n    ...args,\n  );\n\n  return (returnValue as ReturnValue) ?? undefined;\n}\n"]}