import { remote } from 'webdriverio';
import ElectronWorkerService from './service.js';
import ElectronLaunchService from './launcher.js';
import { CUSTOM_CAPABILITY_NAME } from './constants.js';
import log from './log.js';
export async function init(opts) {
    const testRunnerOpts = opts;
    let capabilities = {
        browserName: 'electron',
        [CUSTOM_CAPABILITY_NAME]: opts,
    };
    const launcher = new ElectronLaunchService(opts, capabilities, testRunnerOpts);
    const service = new ElectronWorkerService(opts);
    await launcher.onPrepare(testRunnerOpts, [capabilities]);
    log.debug('Session capabilities:', capabilities);
    // initialise session
    const browser = await remote({
        capabilities,
    });
    await service.before(capabilities, [], browser);
    return browser;
}
//# sourceMappingURL=session.js.map