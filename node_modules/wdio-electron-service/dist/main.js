import electron, { app, ipcMain } from 'electron';
import copy from 'fast-copy';
import { Channel } from './constants.js';
globalThis.originalApi = {};
// store electron API
app.whenReady().then(() => {
    for (const api in electron) {
        const apiName = api;
        globalThis.originalApi[apiName] = {};
        for (const apiElement in electron[apiName]) {
            const apiElementName = apiElement;
            globalThis.originalApi[apiName][apiElementName] = copy(electron[apiName][apiElementName]);
        }
    }
});
ipcMain.handle(Channel.Execute, (_event, script, args) => {
    return new Function(`return (${script}).apply(this, arguments)`)(electron, ...args);
});
//# sourceMappingURL=main.js.map