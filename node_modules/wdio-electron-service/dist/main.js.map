{"version":3,"file":"main.js","sourceRoot":"","sources":["../src/main.ts"],"names":[],"mappings":"AAAA,OAAO,QAAQ,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,UAAU,CAAC;AAClD,OAAO,IAAI,MAAM,WAAW,CAAC;AAE7B,OAAO,EAAE,OAAO,EAAE,MAAM,gBAAgB,CAAC;AAGzC,UAAU,CAAC,WAAW,GAAG,EAA2E,CAAC;AAErG,qBAAqB;AACrB,GAAG,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;IACxB,KAAK,MAAM,GAAG,IAAI,QAAQ,EAAE,CAAC;QAC3B,MAAM,OAAO,GAAG,GAAyB,CAAC;QAC1C,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,EAAqC,CAAC;QACxE,KAAK,MAAM,UAAU,IAAI,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC;YAC3C,MAAM,cAAc,GAAG,UAAmD,CAAC;YAE3E,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;QAC5F,CAAC;IACH,CAAC;AACH,CAAC,CAAC,CAAC;AAEH,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,MAAmC,EAAE,MAAc,EAAE,IAAe,EAAE,EAAE;IACvG,OAAO,IAAI,QAAQ,CAAC,WAAW,MAAM,0BAA0B,CAAC,CAAC,QAAQ,EAAE,GAAG,IAAI,CAAC,CAAC;AACtF,CAAC,CAAC,CAAC","sourcesContent":["import electron, { app, ipcMain } from 'electron';\nimport copy from 'fast-copy';\n\nimport { Channel } from './constants.js';\nimport type { ElectronInterface, ElectronType } from './types.js';\n\nglobalThis.originalApi = {} as unknown as Record<ElectronInterface, ElectronType[ElectronInterface]>;\n\n// store electron API\napp.whenReady().then(() => {\n  for (const api in electron) {\n    const apiName = api as keyof ElectronType;\n    globalThis.originalApi[apiName] = {} as ElectronType[ElectronInterface];\n    for (const apiElement in electron[apiName]) {\n      const apiElementName = apiElement as keyof ElectronType[ElectronInterface];\n\n      globalThis.originalApi[apiName][apiElementName] = copy(electron[apiName][apiElementName]);\n    }\n  }\n});\n\nipcMain.handle(Channel.Execute, (_event: Electron.IpcMainInvokeEvent, script: string, args: unknown[]) => {\n  return new Function(`return (${script}).apply(this, arguments)`)(electron, ...args);\n});\n"]}