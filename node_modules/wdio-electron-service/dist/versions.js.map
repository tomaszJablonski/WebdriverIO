{"version":3,"file":"versions.js","sourceRoot":"","sources":["../src/versions.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,MAAM,YAAY,CAAC;AAC/B,OAAO,EAAE,eAAe,EAAE,MAAM,kBAAkB,CAAC;AACnD,OAAO,EAAE,YAAY,EAAE,MAAM,sBAAsB,CAAC;AAEpD,OAAO,GAAG,MAAM,UAAU,CAAC;AAE3B,MAAM,0BAA0B,GAA4B,EAAE,CAAC;AAO/D,MAAM,CAAC,MAAM,kBAAkB,GAAG,KAAK,EAAE,eAAwB,EAAE,EAAE;IACnE,GAAG,CAAC,KAAK,CAAC,6CAA6C,CAAC,CAAC;IACzD,IAAI,CAAC;QACH,+DAA+D;QAC/D,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,2CAA2C,CAAC,CAAC;QACtE,MAAM,mBAAmB,GAAG,CAAC,MAAM,IAAI,CAAC,IAAI,EAAE,CAAsB,CAAC;QACrE,mBAAmB;aAChB,IAAI,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aAC/D,OAAO,CAAC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,EAAE;YAC/B,0BAA0B,CAAC,OAAkD,CAAC,GAAG,MAAM,CAAC;QAC1F,CAAC,CAAC,CAAC;QAEL,OAAO,0BAA0B,CAAC,eAA0D,CAAC,CAAC;IAChG,CAAC;IAAC,OAAO,CAAC,EAAE,CAAC;QACX,sEAAsE;QACtE,GAAG,CAAC,KAAK,CAAC,qBAAqB,EAAE,CAAC,CAAC,CAAC;QACpC,OAAO,YAAY,CAAC,eAA4C,CAAC,CAAC;IACpE,CAAC;AACH,CAAC,CAAC","sourcesContent":["import fetch from 'node-fetch';\nimport { compareVersions } from 'compare-versions';\nimport { fullVersions } from 'electron-to-chromium';\n\nimport log from './log.js';\n\nconst electronChromiumVersionMap: { [K: string]: string } = {};\n\ntype ElectronRelease = {\n  chrome: string;\n  version: string;\n};\n\nexport const getChromiumVersion = async (electronVersion?: string) => {\n  log.debug('Updating Electron - Chromium version map...');\n  try {\n    // get the electron releases list and construct the version map\n    const body = await fetch('https://electronjs.org/headers/index.json');\n    const allElectronVersions = (await body.json()) as ElectronRelease[];\n    allElectronVersions\n      .sort(({ version: a }, { version: b }) => compareVersions(a, b))\n      .forEach(({ chrome, version }) => {\n        electronChromiumVersionMap[version as keyof typeof electronChromiumVersionMap] = chrome;\n      });\n\n    return electronChromiumVersionMap[electronVersion as keyof typeof electronChromiumVersionMap];\n  } catch (e) {\n    // fall back to the locally installed electron-to-chromium version map\n    log.debug('Map update failed: ', e);\n    return fullVersions[electronVersion as keyof typeof fullVersions];\n  }\n};\n"]}